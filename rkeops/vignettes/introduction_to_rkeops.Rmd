---
title: "Introduction to RKeOps"
output: 
  pdf_document:
    toc: true
    number_sections: yes
  rmarkdown::html_vignette:
    toc: true
author: "Ghislain Durif"
date: "`r Sys.Date()`"
abstract: "RKeOps is the R package interfacing the KeOps library."
vignette: >
  %\VignetteIndexEntry{Introduction to RKeOps}
  %\VignetteEncoding{UTF-8}
  %\VignetteEngine{knitr::rmarkdown}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  progress = TRUE,
  warning = FALSE
)
```

* URL: <https://www.kernel-operations.io/>
* Source: <https://github.com/getkeops/keops>
* Licence and Copyright: see <https://github.com/getkeops/keops/blob/master/licence.txt>


# Authors

Feel free to contact us for any bug report or feature request:

* [Benjamin Charlier](http://imag.umontpellier.fr/~charlier/)
* [Ghislain Durif](https://gdurif.perso.math.cnrs.fr/)
* [Jean Feydy](http://www.math.ens.fr/~feydy/)
* [Joan Alexis GlaunÃ¨s](http://www.mi.parisdescartes.fr/~glaunes/)

# KeOps: seamless Kernel Operations on GPU, with auto-differentiation and without memory overflows

The KeOps library (http://www.kernel-operations.io) provides routines to compute generic reductions of large 2d arrays whose entries are given by a mathematical formula. Using a C++/CUDA-based implementation with GPU support, it combines a tiled reduction scheme with an automatic differentiation engine. Relying on online map-reduce schemes, it is perfectly suited to the scalable computation of kernel dot products and the associated gradients, even when the full kernel matrix does not fit into the GPU memory.

KeOps is all about breaking through this memory bottleneck and making GPU power available for seamless standard mathematical routine computations. As of 2019, this effort has been mostly restricted to the operations needed to implement Convolutional Neural Networks: linear algebra routines and convolutions on grids, images and volumes. KeOps provides GPU support without the cost of developing a specific CUDA implementation of your custom mathematical operators.

To ensure its verstility, KeOps can be used through Matlab, Python (NumPy or PyTorch) and R backends.

# Install RKeOps

## Requirements

* R (tested with R >= 3.5)
* Cmake (>=3.10)
* C++ compiler (g++ >=7 or clang) for CPU computing or CUDA compiler (nvcc >=10) and CUDA libs for GPU computing

## Install from CRAN
(**not available at the moment**)
```{r install, eval=FALSE}
install.packages("rkeops")
```

## Install from sources

* Install directly from Github (requires `git`)
```{r install_github, eval=FALSE}
devtools::install_git("https://github.com/getkeops/keops", 
                      subdir = "rkeops", 
                      args="--recurse-submodules=\"keops/lib/sequences\"")
# not possible to use `devtools::intall_github()` because of the submodule
```

## Get sources and install from local repository
* Get KeOps sources (bash command)
```bash
git clone --recurse-submodules="keops/lib/sequences" https://github.com/getkeops/keops
# or
git clone https://github.com/getkeops/keops
cd keops
git submodule update --init -- keops/lib/sequences
# other submodules are not necessary for RKeOps
```

* Install from source in R (assuming you are in the `keops` directory)
```{r install_src, eval=FALSE}
devtools::install("rkeops")
```

---

# Using RKeOps

```{r setup}
library(rkeops)
```
